{"ast":null,"code":"import _objectSpread from\"C:/Users/Admin/Documents/FitnessTracker/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{initializeApp}from'firebase/app';import{getFirestore,doc,getDoc,setDoc,updateDoc,onSnapshot,collection,query,getDocs,Timestamp}from'firebase/firestore';import{getAuth,signInWithCustomToken,signInAnonymously,onAuthStateChanged}from'firebase/auth';// Define the Firebase config to be used as a fallback if not provided by the environment.\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const fallbackFirebaseConfig={apiKey:\"AIzaSyB364oqoNGpGs1KHQhFY75KsGy2gQwYjUI\",authDomain:\"fitness-tracker-ff53e.firebaseapp.com\",projectId:\"fitness-tracker-ff53e\",storageBucket:\"fitness-tracker-ff53e.firebasestorage.app\",messagingSenderId:\"608373111852\",appId:\"1:608373111852:web:af0dfb9dcc685947c2a589\"};// --- Helper Functions (Provided by User) ---\n// Utility function to format dates\nconst formatDate=date=>{if(!date)return'N/A';const d=new Date(date);return d.toLocaleDateString('en-US',{weekday:'long',year:'numeric',month:'long',day:'numeric'});};// Helper function to get the current exercise details based on the progressive schedule\nconst getDynamicExerciseDetails=exercise=>{var _exercise$lastComplet;if(!exercise||!exercise.schedule||exercise.schedule.length===0){return{sets:'N/A',reps:'N/A'};}const lastCompletedDate=(_exercise$lastComplet=exercise.lastCompletedDate)===null||_exercise$lastComplet===void 0?void 0:_exercise$lastComplet.toDate();if(!lastCompletedDate){// If never completed, return the details of the first phase\nconst firstPhase=exercise.schedule[0];return{sets:firstPhase.sets,reps:firstPhase.reps};}const today=new Date();const weeksPassed=Math.floor((today-lastCompletedDate)/(1000*60*60*24*7));let totalWeeks=0;for(const phase of exercise.schedule){totalWeeks+=phase.weeks;if(weeksPassed<totalWeeks){return{sets:phase.sets,reps:phase.reps};}}// If all phases are completed, repeat the last phase\nconst lastPhase=exercise.schedule[exercise.schedule.length-1];return{sets:lastPhase.sets,reps:lastPhase.reps};};// Helper function to generate calendar data\nconst getCalendarData=(exercises,history,month,year)=>{const firstDayOfMonth=new Date(year,month,1);const lastDayOfMonth=new Date(year,month+1,0);const calendarData={};const isWorkoutDay=(exercise,dateToCheck)=>{if(!exercise)return false;const today=new Date();const isToday=dateToCheck.getFullYear()===today.getFullYear()&&dateToCheck.getMonth()===today.getMonth()&&dateToCheck.getDate()===today.getDate();if(!exercise.lastCompletedDate){return isToday;}const lastCompleted=exercise.lastCompletedDate.toDate();const daysSinceLastCompletion=Math.floor((dateToCheck-lastCompleted)/(1000*60*60*24));if(daysSinceLastCompletion<0&&!isToday){return false;}let totalCycleDays=(exercise.frequency-1)*exercise.restBetweenSessions+exercise.restBeforeNextRound+exercise.frequency;const dayInCycle=daysSinceLastCompletion%totalCycleDays;let scheduledDays=[];let currentDay=0;for(let i=0;i<exercise.frequency;i++){scheduledDays.push(currentDay);currentDay+=1+exercise.restBetweenSessions;}const shiftedDayInCycle=(dayInCycle+(totalCycleDays-(exercise.staggerDays||0)))%totalCycleDays;return scheduledDays.includes(shiftedDayInCycle);};history.forEach(item=>{const itemDate=item.completedAt.toDate();const dateKey=\"\".concat(itemDate.getFullYear(),\"-\").concat(itemDate.getMonth(),\"-\").concat(itemDate.getDate());if(!calendarData[dateKey]){calendarData[dateKey]={date:itemDate,status:'green',exercises:new Set(),completed:true};}calendarData[dateKey].exercises.add(item.name);});let currentDate=new Date(firstDayOfMonth);while(currentDate<=lastDayOfMonth){const dateKey=\"\".concat(currentDate.getFullYear(),\"-\").concat(currentDate.getMonth(),\"-\").concat(currentDate.getDate());exercises.forEach(exercise=>{if(isWorkoutDay(exercise,currentDate)){if(!calendarData[dateKey]){calendarData[dateKey]={date:new Date(currentDate),status:'red',exercises:new Set(),completed:false};}calendarData[dateKey].exercises.add(exercise.name);}});currentDate.setDate(currentDate.getDate()+1);}Object.values(calendarData).forEach(day=>{day.exercises=Array.from(day.exercises);if(day.completed){day.status='green';}else{day.status='red';}});return calendarData;};// --- Fitness Tracker Main App Component (Provided by User) ---\nfunction FitnessTrackerApp(_ref){let{db,auth,userId,appId,handleLogout}=_ref;// State variables for the fitness tracker functionality\nconst[currentPage,setCurrentPage]=useState('today');const[exercises,setExercises]=useState([]);const[history,setHistory]=useState([]);const[exerciseName,setExerciseName]=useState('');const[progressiveSchedule,setProgressiveSchedule]=useState([{weeks:1,sets:'',reps:''}]);const[rest,setRest]=useState('');const[frequency,setFrequency]=useState('');const[restBetween,setRestBetween]=useState('');const[restBeforeNext,setRestBeforeNext]=useState('');const[staggerDays,setStaggerDays]=useState(0);const[message,setMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const[currentMonth,setCurrentMonth]=useState(new Date().getMonth());const[currentYear,setCurrentYear]=useState(new Date().getFullYear());// Fetching data from Firestore\nuseEffect(()=>{if(!db||!userId)return;const exercisesRef=collection(db,\"artifacts/\".concat(appId,\"/users/\").concat(userId,\"/exercises\"));const historyRef=collection(db,\"artifacts/\".concat(appId,\"/users/\").concat(userId,\"/history\"));const unsubscribeExercises=onSnapshot(exercisesRef,snapshot=>{const exercisesList=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setExercises(exercisesList);});const unsubscribeHistory=onSnapshot(historyRef,snapshot=>{const historyList=snapshot.docs.map(doc=>_objectSpread({id:doc.id},doc.data()));setHistory(historyList);});return()=>{unsubscribeExercises();unsubscribeHistory();};},[db,userId,appId]);// Handle changes to the progressive schedule form\nconst handleScheduleChange=(index,event)=>{const newSchedule=[...progressiveSchedule];newSchedule[index][event.target.name]=parseInt(event.target.value)||'';setProgressiveSchedule(newSchedule);};const handleAddPhase=()=>{setProgressiveSchedule([...progressiveSchedule,{weeks:1,sets:'',reps:''}]);};const handleRemovePhase=index=>{const newSchedule=[...progressiveSchedule];newSchedule.splice(index,1);setProgressiveSchedule(newSchedule);};// Handle form submission for adding a new exercise schedule\nconst handleAddSchedule=async e=>{e.preventDefault();setIsLoading(true);setMessage('');try{const exercisesRef=collection(db,\"artifacts/\".concat(appId,\"/users/\").concat(userId,\"/exercises\"));await setDoc(doc(exercisesRef,exerciseName),{name:exerciseName,rest:rest,frequency:parseInt(frequency),restBetweenSessions:parseInt(restBetween),restBeforeNextRound:parseInt(restBeforeNext),staggerDays:parseInt(staggerDays),schedule:progressiveSchedule.map(phase=>({weeks:parseInt(phase.weeks)||0,sets:parseInt(phase.sets)||0,reps:parseInt(phase.reps)||0})),lastCompletedDate:null,sessionCount:0});setMessage('Exercise schedule saved successfully!');setExerciseName('');setProgressiveSchedule([{weeks:1,sets:'',reps:''}]);setRest('');setFrequency('');setRestBetween('');setRestBeforeNext('');setStaggerDays(0);}catch(e){console.error('Error adding schedule:',e);setMessage('Error saving schedule.');}finally{setIsLoading(false);}};// Check if today is a workout day\nconst isTodayAWorkoutDay=exercise=>{if(!exercise)return false;const today=new Date();const dateToCheck=today;if(!exercise.lastCompletedDate){return true;}const lastCompleted=exercise.lastCompletedDate.toDate();const daysSinceLastCompletion=Math.floor((dateToCheck-lastCompleted)/(1000*60*60*24));let totalCycleDays=(exercise.frequency-1)*exercise.restBetweenSessions+exercise.restBeforeNextRound+exercise.frequency;const dayInCycle=daysSinceLastCompletion%totalCycleDays;let scheduledDays=[];let currentDay=0;for(let i=0;i<exercise.frequency;i++){scheduledDays.push(currentDay);currentDay+=1+exercise.restBetweenSessions;}const shiftedDayInCycle=(dayInCycle+(totalCycleDays-(exercise.staggerDays||0)))%totalCycleDays;return scheduledDays.includes(shiftedDayInCycle);};// Handle marking an exercise as complete\nconst handleMarkComplete=async exerciseId=>{if(!db||!userId)return;try{const exerciseRef=doc(db,\"artifacts/\".concat(appId,\"/users/\").concat(userId,\"/exercises/\").concat(exerciseId));const exerciseDoc=await getDoc(exerciseRef);const exerciseData=exerciseDoc.data();const{sets,reps}=getDynamicExerciseDetails(exerciseData);const newSessionCount=(exerciseData.sessionCount||0)+1;await updateDoc(exerciseRef,{lastCompletedDate:Timestamp.now(),sessionCount:newSessionCount});const historyRef=collection(db,\"artifacts/\".concat(appId,\"/users/\").concat(userId,\"/history\"));await setDoc(doc(historyRef,Timestamp.now().toMillis().toString()),{name:exerciseData.name,sets:sets,reps:reps,rest:exerciseData.rest,completedAt:Timestamp.now()});setMessage(\"\".concat(exerciseData.name,\" completed successfully!\"));}catch(e){console.error('Error marking exercise as complete:',e);setMessage('Error marking exercise as complete.');}};const todayExercises=exercises.filter(isTodayAWorkoutDay);const renderTodayPage=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 sm:p-8 space-y-4 sm:space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl sm:text-3xl font-bold text-gray-800 text-center\",children:\"Today's Workout\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm sm:text-lg text-gray-600 text-center\",children:formatDate(new Date())}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative text-center text-sm sm:text-base\",role:\"alert\",children:message}),todayExercises.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"p-4 sm:p-6 bg-yellow-100 rounded-xl shadow-md text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm sm:text-xl text-yellow-700 font-semibold\",children:\"No exercises due today! Enjoy your rest.\"})}):todayExercises.map(exercise=>{var _exercise$lastComplet2;const{sets,reps}=getDynamicExerciseDetails(exercise);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 sm:p-6 bg-white rounded-xl shadow-md space-y-3 sm:space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl sm:text-2xl font-semibold text-blue-600\",children:exercise.name}),/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",onChange:()=>handleMarkComplete(exercise.id),className:\"form-checkbox h-6 w-6 text-blue-600 bg-gray-200 rounded focus:ring-blue-500 transition duration-150 ease-in-out\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm sm:text-base text-gray-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Details:\"}),\" \",sets,\" sets of \",reps,\" reps with \",exercise.rest,\" seconds rest between sets.\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm sm:text-base text-gray-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Schedule:\"}),\" \",exercise.frequency,\" times per week, with \",exercise.restBetweenSessions,\" day(s) rest between sessions and \",exercise.restBeforeNextRound,\" day(s) rest before the next round.\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm sm:text-base text-gray-700\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Stagger:\"}),\" Starting on day \",exercise.staggerDays,\" of the cycle.\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs sm:text-sm text-gray-500\",children:[\"Last completed: \",formatDate(((_exercise$lastComplet2=exercise.lastCompletedDate)===null||_exercise$lastComplet2===void 0?void 0:_exercise$lastComplet2.toDate())||null)]})]},exercise.id);})]});const renderHistoryPage=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 sm:p-8 space-y-4 sm:space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl sm:text-3xl font-bold text-gray-800 text-center\",children:\"Exercise History\"}),history.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-sm sm:text-base text-gray-600\",children:\"No completed exercises yet. Start a workout!\"}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\",children:history.sort((a,b)=>b.completedAt.toDate()-a.completedAt.toDate()).map(item=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 sm:p-6 bg-white rounded-xl shadow-md\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg sm:text-xl font-semibold text-blue-600\",children:item.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm sm:text-base text-gray-700 mt-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"Details:\"}),\" \",item.sets,\" sets of \",item.reps,\" reps\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs sm:text-sm text-gray-500 mt-1\",children:[\"Completed on: \",formatDate(item.completedAt.toDate())]})]},item.id))})]});const renderSetupPage=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 sm:p-8 space-y-4 sm:space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl sm:text-3xl font-bold text-gray-800 text-center\",children:\"Setup a New Exercise\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative text-center text-sm sm:text-base\",role:\"alert\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddSchedule,className:\"bg-white p-4 sm:p-8 rounded-xl shadow-md space-y-4 sm:space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:\"block text-gray-700 font-semibold\",children:\"Exercise Name\"}),/*#__PURE__*/_jsx(\"input\",{id:\"name\",type:\"text\",value:exerciseName,onChange:e=>setExerciseName(e.target.value),required:true,className:\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4 p-4 border border-gray-300 rounded-lg\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800\",children:\"Progressive Schedule\"}),progressiveSchedule.map((phase,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 items-end\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-gray-700 text-sm\",children:[\"Phase \",index+1,\" Duration (weeks)\"]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"weeks\",value:phase.weeks,onChange:e=>handleScheduleChange(index,e),required:true,className:\"w-full mt-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm\",children:\"Sets\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"sets\",value:phase.sets,onChange:e=>handleScheduleChange(index,e),required:true,className:\"w-full mt-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 text-sm\",children:\"Reps\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"reps\",value:phase.reps,onChange:e=>handleScheduleChange(index,e),required:true,className:\"w-full mt-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"})]}),progressiveSchedule.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleRemovePhase(index),className:\"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors duration-150\",children:\"Remove\"})]},index)),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleAddPhase,className:\"w-full sm:w-auto mt-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg transition-colors duration-150\",children:\"Add Phase\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"rest\",className:\"block text-gray-700 font-semibold\",children:\"Rest Time (e.g., 60-90s)\"}),/*#__PURE__*/_jsx(\"input\",{id:\"rest\",type:\"text\",value:rest,onChange:e=>setRest(e.target.value),required:true,className:\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"frequency\",className:\"block text-gray-700 font-semibold\",children:\"Frequency (times per cycle)\"}),/*#__PURE__*/_jsx(\"input\",{id:\"frequency\",type:\"number\",value:frequency,onChange:e=>setFrequency(e.target.value),required:true,className:\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"restBetween\",className:\"block text-gray-700 font-semibold\",children:\"Rest Days Between Sessions\"}),/*#__PURE__*/_jsx(\"input\",{id:\"restBetween\",type:\"number\",value:restBetween,onChange:e=>setRestBetween(e.target.value),required:true,className:\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"restBeforeNext\",className:\"block text-gray-700 font-semibold\",children:\"Rest Days Before Next Round\"}),/*#__PURE__*/_jsx(\"input\",{id:\"restBeforeNext\",type:\"number\",value:restBeforeNext,onChange:e=>setRestBeforeNext(e.target.value),required:true,className:\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"staggerDays\",className:\"block text-gray-700 font-semibold\",children:\"Stagger Start Day (0 = first day of cycle)\"}),/*#__PURE__*/_jsx(\"input\",{id:\"staggerDays\",type:\"number\",value:staggerDays,onChange:e=>setStaggerDays(e.target.value),required:true,className:\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isLoading,className:\"w-full font-bold py-3 px-4 rounded-lg focus:outline-none focus:ring-4 transition duration-150 ease-in-out shadow-md\\n            \".concat(!isLoading?'bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-300':'bg-gray-300 text-gray-500 cursor-not-allowed'),children:isLoading?'Saving...':'Save Schedule'})]})]});const renderCalendarPage=()=>{const calendarData=getCalendarData(exercises,history,currentMonth,currentYear);const today=new Date();const isCurrentMonth=today.getFullYear()===currentYear&&today.getMonth()===currentMonth;const daysInMonth=new Date(currentYear,currentMonth+1,0).getDate();const firstDay=new Date(currentYear,currentMonth,1).getDay();const days=[];for(let i=0;i<firstDay;i++){days.push(/*#__PURE__*/_jsx(\"div\",{className:\"p-2\"},\"empty-\".concat(i)));}for(let day=1;day<=daysInMonth;day++){const date=new Date(currentYear,currentMonth,day);const dateKey=\"\".concat(date.getFullYear(),\"-\").concat(date.getMonth(),\"-\").concat(date.getDate());const dayData=calendarData[dateKey]||{};const statusClass=dayData.status==='green'?'bg-green-200':dayData.status==='red'?'bg-red-200':'bg-gray-100';const isToday=isCurrentMonth&&day===today.getDate();const todayClass=isToday?'border-2 border-blue-500 shadow-md':'';days.push(/*#__PURE__*/_jsxs(\"div\",{className:\"p-1 sm:p-2 rounded-xl text-center transition-colors duration-200 \".concat(statusClass,\" \").concat(todayClass),children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold text-sm sm:text-base\",children:day}),dayData.exercises&&dayData.exercises.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-1 text-xs text-gray-600\",children:dayData.exercises.map((name,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"text-[10px] sm:text-xs\",children:name},index))})]},day));}const monthNames=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];const handlePreviousMonth=()=>{setCurrentMonth(prev=>{if(prev===0){setCurrentYear(y=>y-1);return 11;}return prev-1;});};const handleNextMonth=()=>{setCurrentMonth(prev=>{if(prev===11){setCurrentYear(y=>y+1);return 0;}return prev+1;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 sm:p-8 space-y-4 sm:space-y-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl sm:text-3xl font-bold text-gray-800 text-center\",children:\"Workout Calendar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePreviousMonth,className:\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6 text-gray-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-lg sm:text-xl font-bold\",children:[monthNames[currentMonth],\" \",currentYear]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNextMonth,className:\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-6 w-6 text-gray-600\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5l7 7-7 7\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-7 gap-1 sm:gap-2 text-center font-bold text-gray-600 text-sm\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Sun\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Mon\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Tue\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Wed\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Thu\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Fri\"}),/*#__PURE__*/_jsx(\"div\",{children:\"Sat\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-7 gap-1 sm:gap-2\",children:days}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 sm:mt-6 p-4 bg-white rounded-xl shadow-md text-gray-700 text-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-green-400 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Completed workout\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 mt-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 bg-red-400 rounded-full\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Scheduled workout, but incomplete\"})]})]})]});};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 font-sans flex flex-col items-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"w-full max-w-4xl p-2 sm:p-4\",children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"bg-white rounded-2xl shadow-lg p-2 flex justify-around mb-4 sm:mb-8\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('today'),className:\"flex-1 text-center py-2 px-1 sm:px-4 rounded-lg font-semibold text-xs sm:text-base transition-all duration-300 \".concat(currentPage==='today'?'bg-blue-600 text-white shadow-md':'text-gray-600 hover:bg-gray-200'),children:\"Today\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('history'),className:\"flex-1 text-center py-2 px-1 sm:px-4 rounded-lg font-semibold text-xs sm:text-base transition-all duration-300 \".concat(currentPage==='history'?'bg-blue-600 text-white shadow-md':'text-gray-600 hover:bg-gray-200'),children:\"History\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('calendar'),className:\"flex-1 text-center py-2 px-1 sm:px-4 rounded-lg font-semibold text-xs sm:text-base transition-all duration-300 \".concat(currentPage==='calendar'?'bg-blue-600 text-white shadow-md':'text-gray-600 hover:bg-gray-200'),children:\"Calendar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage('setup'),className:\"flex-1 text-center py-2 px-1 sm:px-4 rounded-lg font-semibold text-xs sm:text-base transition-all duration-300 \".concat(currentPage==='setup'?'bg-blue-600 text-white shadow-md':'text-gray-600 hover:bg-gray-200'),children:\"Setup\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,className:\"flex-1 text-center py-2 px-1 sm:px-4 rounded-lg font-semibold text-xs sm:text-base transition-all duration-300 text-red-600 hover:bg-gray-200\",children:\"Log Out\"})]}),userId&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-xs sm:text-sm text-gray-500 mb-2 sm:mb-4 break-all\",children:[\"User ID: \",userId]}),/*#__PURE__*/_jsx(\"main\",{className:\"w-full\",children:(()=>{switch(currentPage){case'today':return renderTodayPage();case'history':return renderHistoryPage();case'calendar':return renderCalendarPage();case'setup':return renderSetupPage();default:return null;}})()})]})});}// --- Root App Component with Conditional Rendering ---\nexport default function App(){const[db,setDb]=useState(null);const[auth,setAuth]=useState(null);const[userId,setUserId]=useState(null);const[isAuthReady,setIsAuthReady]=useState(false);const[message,setMessage]=useState('');// Check if __initial_auth_token and __app_id are defined, if not, create fallback variables.\nconst initialAuthToken=typeof __initial_auth_token!=='undefined'?__initial_auth_token:null;const appId=typeof __app_id!=='undefined'?__app_id:'default-app-id';const firebaseConfigCanvas=typeof __firebase_config!=='undefined'?JSON.parse(__firebase_config):fallbackFirebaseConfig;// Firebase Initialization and Authentication\nuseEffect(()=>{const initApp=async()=>{try{const app=initializeApp(firebaseConfigCanvas);const firestoreDb=getFirestore(app);const firestoreAuth=getAuth(app);setDb(firestoreDb);setAuth(firestoreAuth);// Explicitly sign in immediately on app load\nif(initialAuthToken){await signInWithCustomToken(firestoreAuth,initialAuthToken);}else{await signInAnonymously(firestoreAuth);}// Use the onAuthStateChanged listener to set the user ID and readiness state.\nconst unsubscribe=onAuthStateChanged(firestoreAuth,user=>{if(user){setUserId(user.uid);setIsAuthReady(true);}});return()=>unsubscribe();}catch(e){console.error('Error initializing Firebase:',e);}};initApp();},[initialAuthToken,firebaseConfigCanvas]);// Handle logout\nconst handleLogout=()=>{setIsLoggedIn(false);setMessage('You have been logged out.');};// Show the main app if logged in and authentication is ready\nreturn/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-100 font-sans flex flex-col items-center\",children:!isAuthReady?/*#__PURE__*/_jsx(\"div\",{className:\"text-center text-xl text-gray-500 p-8\",children:\"Loading app...\"}):/*#__PURE__*/_jsx(FitnessTrackerApp,{db:db,auth:auth,userId:userId,appId:appId,handleLogout:handleLogout})});}","map":{"version":3,"names":["React","useState","useEffect","initializeApp","getFirestore","doc","getDoc","setDoc","updateDoc","onSnapshot","collection","query","getDocs","Timestamp","getAuth","signInWithCustomToken","signInAnonymously","onAuthStateChanged","jsx","_jsx","jsxs","_jsxs","fallbackFirebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","formatDate","date","d","Date","toLocaleDateString","weekday","year","month","day","getDynamicExerciseDetails","exercise","_exercise$lastComplet","schedule","length","sets","reps","lastCompletedDate","toDate","firstPhase","today","weeksPassed","Math","floor","totalWeeks","phase","weeks","lastPhase","getCalendarData","exercises","history","firstDayOfMonth","lastDayOfMonth","calendarData","isWorkoutDay","dateToCheck","isToday","getFullYear","getMonth","getDate","lastCompleted","daysSinceLastCompletion","totalCycleDays","frequency","restBetweenSessions","restBeforeNextRound","dayInCycle","scheduledDays","currentDay","i","push","shiftedDayInCycle","staggerDays","includes","forEach","item","itemDate","completedAt","dateKey","concat","status","Set","completed","add","name","currentDate","setDate","Object","values","Array","from","FitnessTrackerApp","_ref","db","auth","userId","handleLogout","currentPage","setCurrentPage","setExercises","setHistory","exerciseName","setExerciseName","progressiveSchedule","setProgressiveSchedule","rest","setRest","setFrequency","restBetween","setRestBetween","restBeforeNext","setRestBeforeNext","setStaggerDays","message","setMessage","isLoading","setIsLoading","currentMonth","setCurrentMonth","currentYear","setCurrentYear","exercisesRef","historyRef","unsubscribeExercises","snapshot","exercisesList","docs","map","_objectSpread","id","data","unsubscribeHistory","historyList","handleScheduleChange","index","event","newSchedule","target","parseInt","value","handleAddPhase","handleRemovePhase","splice","handleAddSchedule","e","preventDefault","sessionCount","console","error","isTodayAWorkoutDay","handleMarkComplete","exerciseId","exerciseRef","exerciseDoc","exerciseData","newSessionCount","now","toMillis","toString","todayExercises","filter","renderTodayPage","className","children","role","_exercise$lastComplet2","type","onChange","renderHistoryPage","sort","a","b","renderSetupPage","onSubmit","htmlFor","required","onClick","disabled","renderCalendarPage","isCurrentMonth","daysInMonth","firstDay","getDay","days","dayData","statusClass","todayClass","monthNames","handlePreviousMonth","prev","y","handleNextMonth","xmlns","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","App","setDb","setAuth","setUserId","isAuthReady","setIsAuthReady","initialAuthToken","__initial_auth_token","__app_id","firebaseConfigCanvas","__firebase_config","JSON","parse","initApp","app","firestoreDb","firestoreAuth","unsubscribe","user","uid","setIsLoggedIn"],"sources":["C:/Users/Admin/Documents/FitnessTracker/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { initializeApp } from 'firebase/app';\r\nimport {\r\n  getFirestore,\r\n  doc,\r\n  getDoc,\r\n  setDoc,\r\n  updateDoc,\r\n  onSnapshot,\r\n  collection,\r\n  query,\r\n  getDocs,\r\n  Timestamp,\r\n} from 'firebase/firestore';\r\nimport {\r\n  getAuth,\r\n  signInWithCustomToken,\r\n  signInAnonymously,\r\n  onAuthStateChanged,\r\n} from 'firebase/auth';\r\n\r\n// Define the Firebase config to be used as a fallback if not provided by the environment.\r\nconst fallbackFirebaseConfig = {\r\n  apiKey: \"AIzaSyB364oqoNGpGs1KHQhFY75KsGy2gQwYjUI\",\r\n  authDomain: \"fitness-tracker-ff53e.firebaseapp.com\",\r\n  projectId: \"fitness-tracker-ff53e\",\r\n  storageBucket: \"fitness-tracker-ff53e.firebasestorage.app\",\r\n  messagingSenderId: \"608373111852\",\r\n  appId: \"1:608373111852:web:af0dfb9dcc685947c2a589\"\r\n};\r\n\r\n// --- Helper Functions (Provided by User) ---\r\n\r\n// Utility function to format dates\r\nconst formatDate = (date) => {\r\n  if (!date) return 'N/A';\r\n  const d = new Date(date);\r\n  return d.toLocaleDateString('en-US', {\r\n    weekday: 'long',\r\n    year: 'numeric',\r\n    month: 'long',\r\n    day: 'numeric',\r\n  });\r\n};\r\n\r\n// Helper function to get the current exercise details based on the progressive schedule\r\nconst getDynamicExerciseDetails = (exercise) => {\r\n  if (!exercise || !exercise.schedule || exercise.schedule.length === 0) {\r\n    return { sets: 'N/A', reps: 'N/A' };\r\n  }\r\n\r\n  const lastCompletedDate = exercise.lastCompletedDate?.toDate();\r\n  if (!lastCompletedDate) {\r\n      // If never completed, return the details of the first phase\r\n      const firstPhase = exercise.schedule[0];\r\n      return { sets: firstPhase.sets, reps: firstPhase.reps };\r\n  }\r\n\r\n  const today = new Date();\r\n  const weeksPassed = Math.floor((today - lastCompletedDate) / (1000 * 60 * 60 * 24 * 7));\r\n\r\n  let totalWeeks = 0;\r\n  for (const phase of exercise.schedule) {\r\n    totalWeeks += phase.weeks;\r\n    if (weeksPassed < totalWeeks) {\r\n      return { sets: phase.sets, reps: phase.reps };\r\n    }\r\n  }\r\n\r\n  // If all phases are completed, repeat the last phase\r\n  const lastPhase = exercise.schedule[exercise.schedule.length - 1];\r\n  return { sets: lastPhase.sets, reps: lastPhase.reps };\r\n};\r\n\r\n// Helper function to generate calendar data\r\nconst getCalendarData = (exercises, history, month, year) => {\r\n  const firstDayOfMonth = new Date(year, month, 1);\r\n  const lastDayOfMonth = new Date(year, month + 1, 0);\r\n  const calendarData = {};\r\n\r\n  const isWorkoutDay = (exercise, dateToCheck) => {\r\n    if (!exercise) return false;\r\n\r\n    const today = new Date();\r\n    const isToday = dateToCheck.getFullYear() === today.getFullYear() && dateToCheck.getMonth() === today.getMonth() && dateToCheck.getDate() === today.getDate();\r\n\r\n    if (!exercise.lastCompletedDate) {\r\n      return isToday;\r\n    }\r\n\r\n    const lastCompleted = exercise.lastCompletedDate.toDate();\r\n    const daysSinceLastCompletion = Math.floor((dateToCheck - lastCompleted) / (1000 * 60 * 60 * 24));\r\n\r\n    if (daysSinceLastCompletion < 0 && !isToday) {\r\n        return false;\r\n    }\r\n\r\n    let totalCycleDays = (exercise.frequency - 1) * exercise.restBetweenSessions + exercise.restBeforeNextRound + exercise.frequency;\r\n\r\n    const dayInCycle = daysSinceLastCompletion % totalCycleDays;\r\n\r\n    let scheduledDays = [];\r\n    let currentDay = 0;\r\n    for(let i = 0; i < exercise.frequency; i++) {\r\n        scheduledDays.push(currentDay);\r\n        currentDay += (1 + exercise.restBetweenSessions);\r\n    }\r\n\r\n    const shiftedDayInCycle = (dayInCycle + (totalCycleDays - (exercise.staggerDays || 0))) % totalCycleDays;\r\n\r\n    return scheduledDays.includes(shiftedDayInCycle);\r\n  };\r\n\r\n  history.forEach(item => {\r\n    const itemDate = item.completedAt.toDate();\r\n    const dateKey = `${itemDate.getFullYear()}-${itemDate.getMonth()}-${itemDate.getDate()}`;\r\n    if (!calendarData[dateKey]) {\r\n      calendarData[dateKey] = {\r\n        date: itemDate,\r\n        status: 'green',\r\n        exercises: new Set(),\r\n        completed: true,\r\n      };\r\n    }\r\n    calendarData[dateKey].exercises.add(item.name);\r\n  });\r\n\r\n  let currentDate = new Date(firstDayOfMonth);\r\n  while (currentDate <= lastDayOfMonth) {\r\n    const dateKey = `${currentDate.getFullYear()}-${currentDate.getMonth()}-${currentDate.getDate()}`;\r\n\r\n    exercises.forEach(exercise => {\r\n      if (isWorkoutDay(exercise, currentDate)) {\r\n        if (!calendarData[dateKey]) {\r\n          calendarData[dateKey] = {\r\n            date: new Date(currentDate),\r\n            status: 'red',\r\n            exercises: new Set(),\r\n            completed: false,\r\n          };\r\n        }\r\n        calendarData[dateKey].exercises.add(exercise.name);\r\n      }\r\n    });\r\n    currentDate.setDate(currentDate.getDate() + 1);\r\n  }\r\n\r\n  Object.values(calendarData).forEach(day => {\r\n    day.exercises = Array.from(day.exercises);\r\n    if(day.completed) {\r\n      day.status = 'green';\r\n    } else {\r\n      day.status = 'red';\r\n    }\r\n  });\r\n\r\n  return calendarData;\r\n};\r\n\r\n// --- Fitness Tracker Main App Component (Provided by User) ---\r\n\r\nfunction FitnessTrackerApp({ db, auth, userId, appId, handleLogout }) {\r\n  // State variables for the fitness tracker functionality\r\n  const [currentPage, setCurrentPage] = useState('today');\r\n  const [exercises, setExercises] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n  const [exerciseName, setExerciseName] = useState('');\r\n  const [progressiveSchedule, setProgressiveSchedule] = useState([{ weeks: 1, sets: '', reps: '' }]);\r\n  const [rest, setRest] = useState('');\r\n  const [frequency, setFrequency] = useState('');\r\n  const [restBetween, setRestBetween] = useState('');\r\n  const [restBeforeNext, setRestBeforeNext] = useState('');\r\n  const [staggerDays, setStaggerDays] = useState(0);\r\n  const [message, setMessage] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [currentMonth, setCurrentMonth] = useState(new Date().getMonth());\r\n  const [currentYear, setCurrentYear] = useState(new Date().getFullYear());\r\n\r\n  // Fetching data from Firestore\r\n  useEffect(() => {\r\n    if (!db || !userId) return;\r\n\r\n    const exercisesRef = collection(db, `artifacts/${appId}/users/${userId}/exercises`);\r\n    const historyRef = collection(db, `artifacts/${appId}/users/${userId}/history`);\r\n\r\n    const unsubscribeExercises = onSnapshot(exercisesRef, (snapshot) => {\r\n      const exercisesList = snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data()\r\n      }));\r\n      setExercises(exercisesList);\r\n    });\r\n\r\n    const unsubscribeHistory = onSnapshot(historyRef, (snapshot) => {\r\n      const historyList = snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data()\r\n      }));\r\n      setHistory(historyList);\r\n    });\r\n\r\n    return () => {\r\n      unsubscribeExercises();\r\n      unsubscribeHistory();\r\n    };\r\n  }, [db, userId, appId]);\r\n\r\n  // Handle changes to the progressive schedule form\r\n  const handleScheduleChange = (index, event) => {\r\n    const newSchedule = [...progressiveSchedule];\r\n    newSchedule[index][event.target.name] = parseInt(event.target.value) || '';\r\n    setProgressiveSchedule(newSchedule);\r\n  };\r\n\r\n  const handleAddPhase = () => {\r\n    setProgressiveSchedule([...progressiveSchedule, { weeks: 1, sets: '', reps: '' }]);\r\n  };\r\n\r\n  const handleRemovePhase = (index) => {\r\n    const newSchedule = [...progressiveSchedule];\r\n    newSchedule.splice(index, 1);\r\n    setProgressiveSchedule(newSchedule);\r\n  };\r\n\r\n  // Handle form submission for adding a new exercise schedule\r\n  const handleAddSchedule = async (e) => {\r\n    e.preventDefault();\r\n    setIsLoading(true);\r\n    setMessage('');\r\n\r\n    try {\r\n      const exercisesRef = collection(db, `artifacts/${appId}/users/${userId}/exercises`);\r\n      await setDoc(doc(exercisesRef, exerciseName), {\r\n        name: exerciseName,\r\n        rest: rest,\r\n        frequency: parseInt(frequency),\r\n        restBetweenSessions: parseInt(restBetween),\r\n        restBeforeNextRound: parseInt(restBeforeNext),\r\n        staggerDays: parseInt(staggerDays),\r\n        schedule: progressiveSchedule.map(phase => ({\r\n          weeks: parseInt(phase.weeks) || 0,\r\n          sets: parseInt(phase.sets) || 0,\r\n          reps: parseInt(phase.reps) || 0,\r\n        })),\r\n        lastCompletedDate: null,\r\n        sessionCount: 0,\r\n      });\r\n      setMessage('Exercise schedule saved successfully!');\r\n      setExerciseName('');\r\n      setProgressiveSchedule([{ weeks: 1, sets: '', reps: '' }]);\r\n      setRest('');\r\n      setFrequency('');\r\n      setRestBetween('');\r\n      setRestBeforeNext('');\r\n      setStaggerDays(0);\r\n    } catch (e) {\r\n      console.error('Error adding schedule:', e);\r\n      setMessage('Error saving schedule.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Check if today is a workout day\r\n  const isTodayAWorkoutDay = (exercise) => {\r\n    if (!exercise) return false;\r\n\r\n    const today = new Date();\r\n    const dateToCheck = today;\r\n\r\n    if (!exercise.lastCompletedDate) {\r\n      return true;\r\n    }\r\n\r\n    const lastCompleted = exercise.lastCompletedDate.toDate();\r\n    const daysSinceLastCompletion = Math.floor((dateToCheck - lastCompleted) / (1000 * 60 * 60 * 24));\r\n\r\n    let totalCycleDays = (exercise.frequency - 1) * exercise.restBetweenSessions + exercise.restBeforeNextRound + exercise.frequency;\r\n\r\n    const dayInCycle = daysSinceLastCompletion % totalCycleDays;\r\n\r\n    let scheduledDays = [];\r\n    let currentDay = 0;\r\n    for(let i = 0; i < exercise.frequency; i++) {\r\n        scheduledDays.push(currentDay);\r\n        currentDay += (1 + exercise.restBetweenSessions);\r\n    }\r\n\r\n    const shiftedDayInCycle = (dayInCycle + (totalCycleDays - (exercise.staggerDays || 0))) % totalCycleDays;\r\n\r\n    return scheduledDays.includes(shiftedDayInCycle);\r\n  };\r\n\r\n  // Handle marking an exercise as complete\r\n  const handleMarkComplete = async (exerciseId) => {\r\n    if (!db || !userId) return;\r\n\r\n    try {\r\n      const exerciseRef = doc(db, `artifacts/${appId}/users/${userId}/exercises/${exerciseId}`);\r\n      const exerciseDoc = await getDoc(exerciseRef);\r\n      const exerciseData = exerciseDoc.data();\r\n      const { sets, reps } = getDynamicExerciseDetails(exerciseData);\r\n\r\n      const newSessionCount = (exerciseData.sessionCount || 0) + 1;\r\n      await updateDoc(exerciseRef, {\r\n        lastCompletedDate: Timestamp.now(),\r\n        sessionCount: newSessionCount,\r\n      });\r\n\r\n      const historyRef = collection(db, `artifacts/${appId}/users/${userId}/history`);\r\n      await setDoc(doc(historyRef, Timestamp.now().toMillis().toString()), {\r\n        name: exerciseData.name,\r\n        sets: sets,\r\n        reps: reps,\r\n        rest: exerciseData.rest,\r\n        completedAt: Timestamp.now(),\r\n      });\r\n\r\n      setMessage(`${exerciseData.name} completed successfully!`);\r\n    } catch (e) {\r\n      console.error('Error marking exercise as complete:', e);\r\n      setMessage('Error marking exercise as complete.');\r\n    }\r\n  };\r\n\r\n  const todayExercises = exercises.filter(isTodayAWorkoutDay);\r\n\r\n  const renderTodayPage = () => (\r\n    <div className=\"p-4 sm:p-8 space-y-4 sm:space-y-6\">\r\n      <h2 className=\"text-2xl sm:text-3xl font-bold text-gray-800 text-center\">Today's Workout</h2>\r\n      <p className=\"text-sm sm:text-lg text-gray-600 text-center\">{formatDate(new Date())}</p>\r\n      {message && (\r\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative text-center text-sm sm:text-base\" role=\"alert\">\r\n          {message}\r\n        </div>\r\n      )}\r\n      {todayExercises.length === 0 ? (\r\n        <div className=\"p-4 sm:p-6 bg-yellow-100 rounded-xl shadow-md text-center\">\r\n          <p className=\"text-sm sm:text-xl text-yellow-700 font-semibold\">No exercises due today! Enjoy your rest.</p>\r\n        </div>\r\n      ) : (\r\n        todayExercises.map((exercise) => {\r\n          const { sets, reps } = getDynamicExerciseDetails(exercise);\r\n          return (\r\n            <div key={exercise.id} className=\"p-4 sm:p-6 bg-white rounded-xl shadow-md space-y-3 sm:space-y-4\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-xl sm:text-2xl font-semibold text-blue-600\">{exercise.name}</h3>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  onChange={() => handleMarkComplete(exercise.id)}\r\n                  className=\"form-checkbox h-6 w-6 text-blue-600 bg-gray-200 rounded focus:ring-blue-500 transition duration-150 ease-in-out\"\r\n                />\r\n              </div>\r\n              <p className=\"text-sm sm:text-base text-gray-700\">\r\n                <span className=\"font-medium\">Details:</span> {sets} sets of {reps} reps with {exercise.rest} seconds rest between sets.\r\n              </p>\r\n              <p className=\"text-sm sm:text-base text-gray-700\">\r\n                <span className=\"font-medium\">Schedule:</span> {exercise.frequency} times per week, with {exercise.restBetweenSessions} day(s) rest between sessions and {exercise.restBeforeNextRound} day(s) rest before the next round.\r\n              </p>\r\n              <p className=\"text-sm sm:text-base text-gray-700\">\r\n                <span className=\"font-medium\">Stagger:</span> Starting on day {exercise.staggerDays} of the cycle.\r\n              </p>\r\n              <p className=\"text-xs sm:text-sm text-gray-500\">\r\n                Last completed: {formatDate(exercise.lastCompletedDate?.toDate() || null)}\r\n              </p>\r\n            </div>\r\n          );\r\n        })\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderHistoryPage = () => (\r\n    <div className=\"p-4 sm:p-8 space-y-4 sm:space-y-6\">\r\n      <h2 className=\"text-2xl sm:text-3xl font-bold text-gray-800 text-center\">Exercise History</h2>\r\n      {history.length === 0 ? (\r\n        <p className=\"text-center text-sm sm:text-base text-gray-600\">No completed exercises yet. Start a workout!</p>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6\">\r\n          {history.sort((a, b) => b.completedAt.toDate() - a.completedAt.toDate()).map((item) => (\r\n            <div key={item.id} className=\"p-4 sm:p-6 bg-white rounded-xl shadow-md\">\r\n              <h3 className=\"text-lg sm:text-xl font-semibold text-blue-600\">{item.name}</h3>\r\n              <p className=\"text-sm sm:text-base text-gray-700 mt-2\">\r\n                <span className=\"font-medium\">Details:</span> {item.sets} sets of {item.reps} reps\r\n              </p>\r\n              <p className=\"text-xs sm:text-sm text-gray-500 mt-1\">\r\n                Completed on: {formatDate(item.completedAt.toDate())}\r\n              </p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderSetupPage = () => (\r\n    <div className=\"p-4 sm:p-8 space-y-4 sm:space-y-6\">\r\n      <h2 className=\"text-2xl sm:text-3xl font-bold text-gray-800 text-center\">Setup a New Exercise</h2>\r\n      {message && (\r\n        <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative text-center text-sm sm:text-base\" role=\"alert\">\r\n          {message}\r\n        </div>\r\n      )}\r\n      <form onSubmit={handleAddSchedule} className=\"bg-white p-4 sm:p-8 rounded-xl shadow-md space-y-4 sm:space-y-6\">\r\n        <div>\r\n          <label htmlFor=\"name\" className=\"block text-gray-700 font-semibold\">Exercise Name</label>\r\n          <input\r\n            id=\"name\"\r\n            type=\"text\"\r\n            value={exerciseName}\r\n            onChange={(e) => setExerciseName(e.target.value)}\r\n            required\r\n            className=\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"\r\n          />\r\n        </div>\r\n\r\n        <div className=\"space-y-4 p-4 border border-gray-300 rounded-lg\">\r\n          <h3 className=\"text-lg font-semibold text-gray-800\">Progressive Schedule</h3>\r\n          {progressiveSchedule.map((phase, index) => (\r\n            <div key={index} className=\"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 items-end\">\r\n              <div className=\"flex-1\">\r\n                <label className=\"block text-gray-700 text-sm\">Phase {index + 1} Duration (weeks)</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"weeks\"\r\n                  value={phase.weeks}\r\n                  onChange={(e) => handleScheduleChange(index, e)}\r\n                  required\r\n                  className=\"w-full mt-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"\r\n                />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <label className=\"block text-gray-700 text-sm\">Sets</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"sets\"\r\n                  value={phase.sets}\r\n                  onChange={(e) => handleScheduleChange(index, e)}\r\n                  required\r\n                  className=\"w-full mt-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"\r\n                />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <label className=\"block text-gray-700 text-sm\">Reps</label>\r\n                <input\r\n                  type=\"number\"\r\n                  name=\"reps\"\r\n                  value={phase.reps}\r\n                  onChange={(e) => handleScheduleChange(index, e)}\r\n                  required\r\n                  className=\"w-full mt-1 p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"\r\n                />\r\n              </div>\r\n              {progressiveSchedule.length > 1 && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => handleRemovePhase(index)}\r\n                  className=\"p-2 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors duration-150\"\r\n                >\r\n                  Remove\r\n                </button>\r\n              )}\r\n            </div>\r\n          ))}\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleAddPhase}\r\n            className=\"w-full sm:w-auto mt-2 bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-2 px-4 rounded-lg transition-colors duration-150\"\r\n          >\r\n            Add Phase\r\n          </button>\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"rest\" className=\"block text-gray-700 font-semibold\">Rest Time (e.g., 60-90s)</label>\r\n          <input\r\n            id=\"rest\"\r\n            type=\"text\"\r\n            value={rest}\r\n            onChange={(e) => setRest(e.target.value)}\r\n            required\r\n            className=\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"frequency\" className=\"block text-gray-700 font-semibold\">Frequency (times per cycle)</label>\r\n          <input\r\n            id=\"frequency\"\r\n            type=\"number\"\r\n            value={frequency}\r\n            onChange={(e) => setFrequency(e.target.value)}\r\n            required\r\n            className=\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"restBetween\" className=\"block text-gray-700 font-semibold\">Rest Days Between Sessions</label>\r\n          <input\r\n            id=\"restBetween\"\r\n            type=\"number\"\r\n            value={restBetween}\r\n            onChange={(e) => setRestBetween(e.target.value)}\r\n            required\r\n            className=\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"restBeforeNext\" className=\"block text-gray-700 font-semibold\">Rest Days Before Next Round</label>\r\n          <input\r\n            id=\"restBeforeNext\"\r\n            type=\"number\"\r\n            value={restBeforeNext}\r\n            onChange={(e) => setRestBeforeNext(e.target.value)}\r\n            required\r\n            className=\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <label htmlFor=\"staggerDays\" className=\"block text-gray-700 font-semibold\">Stagger Start Day (0 = first day of cycle)</label>\r\n          <input\r\n            id=\"staggerDays\"\r\n            type=\"number\"\r\n            value={staggerDays}\r\n            onChange={(e) => setStaggerDays(e.target.value)}\r\n            required\r\n            className=\"w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-base\"\r\n          />\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          disabled={isLoading}\r\n          className={`w-full font-bold py-3 px-4 rounded-lg focus:outline-none focus:ring-4 transition duration-150 ease-in-out shadow-md\r\n            ${!isLoading\r\n              ? 'bg-blue-600 hover:bg-blue-700 text-white focus:ring-blue-300'\r\n              : 'bg-gray-300 text-gray-500 cursor-not-allowed'\r\n            }`}\r\n        >\r\n          {isLoading ? 'Saving...' : 'Save Schedule'}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n\r\n  const renderCalendarPage = () => {\r\n    const calendarData = getCalendarData(exercises, history, currentMonth, currentYear);\r\n    const today = new Date();\r\n    const isCurrentMonth = today.getFullYear() === currentYear && today.getMonth() === currentMonth;\r\n\r\n    const daysInMonth = new Date(currentYear, currentMonth + 1, 0).getDate();\r\n    const firstDay = new Date(currentYear, currentMonth, 1).getDay();\r\n    const days = [];\r\n\r\n    for (let i = 0; i < firstDay; i++) {\r\n      days.push(<div key={`empty-${i}`} className=\"p-2\"></div>);\r\n    }\r\n\r\n    for (let day = 1; day <= daysInMonth; day++) {\r\n      const date = new Date(currentYear, currentMonth, day);\r\n      const dateKey = `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`;\r\n      const dayData = calendarData[dateKey] || {};\r\n      const statusClass = dayData.status === 'green' ? 'bg-green-200' : dayData.status === 'red' ? 'bg-red-200' : 'bg-gray-100';\r\n      const isToday = isCurrentMonth && day === today.getDate();\r\n      const todayClass = isToday ? 'border-2 border-blue-500 shadow-md' : '';\r\n\r\n      days.push(\r\n        <div key={day} className={`p-1 sm:p-2 rounded-xl text-center transition-colors duration-200 ${statusClass} ${todayClass}`}>\r\n          <div className=\"font-semibold text-sm sm:text-base\">{day}</div>\r\n          {dayData.exercises && dayData.exercises.length > 0 && (\r\n            <div className=\"mt-1 text-xs text-gray-600\">\r\n              {dayData.exercises.map((name, index) => (\r\n                <div key={index} className=\"text-[10px] sm:text-xs\">{name}</div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\r\n\r\n    const handlePreviousMonth = () => {\r\n      setCurrentMonth(prev => {\r\n        if (prev === 0) {\r\n          setCurrentYear(y => y - 1);\r\n          return 11;\r\n        }\r\n        return prev - 1;\r\n      });\r\n    };\r\n\r\n    const handleNextMonth = () => {\r\n      setCurrentMonth(prev => {\r\n        if (prev === 11) {\r\n          setCurrentYear(y => y + 1);\r\n          return 0;\r\n        }\r\n        return prev + 1;\r\n      });\r\n    };\r\n\r\n    return (\r\n      <div className=\"p-4 sm:p-8 space-y-4 sm:space-y-6\">\r\n        <h2 className=\"text-2xl sm:text-3xl font-bold text-gray-800 text-center\">Workout Calendar</h2>\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <button onClick={handlePreviousMonth} className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\r\n            </svg>\r\n          </button>\r\n          <div className=\"text-lg sm:text-xl font-bold\">{monthNames[currentMonth]} {currentYear}</div>\r\n          <button onClick={handleNextMonth} className=\"p-2 rounded-full bg-gray-200 hover:bg-gray-300 transition-colors duration-200\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6 text-gray-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n        <div className=\"grid grid-cols-7 gap-1 sm:gap-2 text-center font-bold text-gray-600 text-sm\">\r\n          <div>Sun</div>\r\n          <div>Mon</div>\r\n          <div>Tue</div>\r\n          <div>Wed</div>\r\n          <div>Thu</div>\r\n          <div>Fri</div>\r\n          <div>Sat</div>\r\n        </div>\r\n        <div className=\"grid grid-cols-7 gap-1 sm:gap-2\">\r\n          {days}\r\n        </div>\r\n        <div className=\"mt-4 sm:mt-6 p-4 bg-white rounded-xl shadow-md text-gray-700 text-sm\">\r\n          <div className=\"flex items-center space-x-2\">\r\n            <div className=\"w-4 h-4 bg-green-400 rounded-full\"></div>\r\n            <span>Completed workout</span>\r\n          </div>\r\n          <div className=\"flex items-center space-x-2 mt-2\">\r\n            <div className=\"w-4 h-4 bg-red-400 rounded-full\"></div>\r\n            <span>Scheduled workout, but incomplete</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 font-sans flex flex-col items-center\">\r\n      <div className=\"w-full max-w-4xl p-2 sm:p-4\">\r\n        {/* Navigation Bar */}\r\n        <nav className=\"bg-white rounded-2xl shadow-lg p-2 flex justify-around mb-4 sm:mb-8\">\r\n          <button\r\n            onClick={() => setCurrentPage('today')}\r\n            className={`flex-1 text-center py-2 px-1 sm:px-4 rounded-lg font-semibold text-xs sm:text-base transition-all duration-300 ${currentPage === 'today' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-200'}`}\r\n          >\r\n            Today\r\n          </button>\r\n          <button\r\n            onClick={() => setCurrentPage('history')}\r\n            className={`flex-1 text-center py-2 px-1 sm:px-4 rounded-lg font-semibold text-xs sm:text-base transition-all duration-300 ${currentPage === 'history' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-200'}`}\r\n          >\r\n            History\r\n          </button>\r\n          <button\r\n            onClick={() => setCurrentPage('calendar')}\r\n            className={`flex-1 text-center py-2 px-1 sm:px-4 rounded-lg font-semibold text-xs sm:text-base transition-all duration-300 ${currentPage === 'calendar' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-200'}`}\r\n          >\r\n            Calendar\r\n          </button>\r\n          <button\r\n            onClick={() => setCurrentPage('setup')}\r\n            className={`flex-1 text-center py-2 px-1 sm:px-4 rounded-lg font-semibold text-xs sm:text-base transition-all duration-300 ${currentPage === 'setup' ? 'bg-blue-600 text-white shadow-md' : 'text-gray-600 hover:bg-gray-200'}`}\r\n          >\r\n            Setup\r\n          </button>\r\n          <button\r\n            onClick={handleLogout}\r\n            className=\"flex-1 text-center py-2 px-1 sm:px-4 rounded-lg font-semibold text-xs sm:text-base transition-all duration-300 text-red-600 hover:bg-gray-200\"\r\n          >\r\n            Log Out\r\n          </button>\r\n        </nav>\r\n\r\n        {/* Display User ID for debugging/collaboration */}\r\n        {userId && (\r\n          <div className=\"text-center text-xs sm:text-sm text-gray-500 mb-2 sm:mb-4 break-all\">\r\n            User ID: {userId}\r\n          </div>\r\n        )}\r\n\r\n        {/* Main Content Area */}\r\n        <main className=\"w-full\">\r\n          {(() => {\r\n            switch (currentPage) {\r\n              case 'today':\r\n                return renderTodayPage();\r\n              case 'history':\r\n                return renderHistoryPage();\r\n              case 'calendar':\r\n                return renderCalendarPage();\r\n              case 'setup':\r\n                return renderSetupPage();\r\n              default:\r\n                return null;\r\n            }\r\n          })()}\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n// --- Root App Component with Conditional Rendering ---\r\n\r\nexport default function App() {\r\n  const [db, setDb] = useState(null);\r\n  const [auth, setAuth] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n  const [isAuthReady, setIsAuthReady] = useState(false);\r\n  const [message, setMessage] = useState('');\r\n\r\n  // Check if __initial_auth_token and __app_id are defined, if not, create fallback variables.\r\n  const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;\r\n  const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\r\n  const firebaseConfigCanvas = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : fallbackFirebaseConfig;\r\n\r\n  // Firebase Initialization and Authentication\r\n  useEffect(() => {\r\n    const initApp = async () => {\r\n      try {\r\n        const app = initializeApp(firebaseConfigCanvas);\r\n        const firestoreDb = getFirestore(app);\r\n        const firestoreAuth = getAuth(app);\r\n        setDb(firestoreDb);\r\n        setAuth(firestoreAuth);\r\n\r\n        // Explicitly sign in immediately on app load\r\n        if (initialAuthToken) {\r\n          await signInWithCustomToken(firestoreAuth, initialAuthToken);\r\n        } else {\r\n          await signInAnonymously(firestoreAuth);\r\n        }\r\n\r\n        // Use the onAuthStateChanged listener to set the user ID and readiness state.\r\n        const unsubscribe = onAuthStateChanged(firestoreAuth, (user) => {\r\n          if (user) {\r\n            setUserId(user.uid);\r\n            setIsAuthReady(true);\r\n          }\r\n        });\r\n        return () => unsubscribe();\r\n\r\n      } catch (e) {\r\n        console.error('Error initializing Firebase:', e);\r\n      }\r\n    };\r\n    initApp();\r\n  }, [initialAuthToken, firebaseConfigCanvas]);\r\n\r\n  // Handle logout\r\n  const handleLogout = () => {\r\n    setIsLoggedIn(false);\r\n    setMessage('You have been logged out.');\r\n  };\r\n\r\n  // Show the main app if logged in and authentication is ready\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 font-sans flex flex-col items-center\">\r\n      {!isAuthReady ? (\r\n        <div className=\"text-center text-xl text-gray-500 p-8\">Loading app...</div>\r\n      ) : (\r\n        <FitnessTrackerApp\r\n          db={db}\r\n          auth={auth}\r\n          userId={userId}\r\n          appId={appId}\r\n          handleLogout={handleLogout}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}